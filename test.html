<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Środowisk Testowych OpenShift</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .environment-card {
            margin-bottom: 15px;
            transition: all 0.3s;
            cursor: pointer;
        }
        .environment-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .status-Healthy {
            border-left: 5px solid #198754;
        }
        .status-Degraded {
            border-left: 5px solid #ffc107;
        }
        .status-Failed {
            border-left: 5px solid #dc3545;
        }
        .status-Starting {
            border-left: 5px solid #0dcaf0;
        }
        .status-Unknown {
            border-left: 5px solid #6c757d;
        }
        .namespace-group {
            margin-bottom: 30px;
            border-radius: 6px;
            padding: 15px;
            background-color: #f8f9fa;
        }
        .filter-group {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 6px;
            background-color: #f8f9fa;
        }
        .pod-status {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
        }
        .pod-status-Running { background-color: #198754; }
        .pod-status-Pending { background-color: #0dcaf0; }
        .pod-status-Failed { background-color: #dc3545; }
        .pod-status-Unknown { background-color: #6c757d; }
        .refresh-button {
            cursor: pointer;
        }
        .refresh-button.rotating i {
            animation: rotate 1s linear infinite;
        }
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .resource-badge {
            font-size: 0.8rem;
            padding: 3px 8px;
            margin-right: 5px;
        }
        .table-container {
            max-height: 300px;
            overflow-y: auto;
        }
        .namespace-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .namespace-counter {
            font-size: 0.9rem;
            color: #6c757d;
        }
        .counter-badge {
            background-color: #e9ecef;
            color: #495057;
            font-weight: normal;
            padding: 3px 8px;
            border-radius: 4px;
        }
        .search-box {
            position: relative;
        }
        .search-box .clear-search {
            position: absolute;
            right: 10px;
            top: 10px;
            cursor: pointer;
            color: #6c757d;
        }
    </style>
</head>
<body class="bg-light">
    <div class="container-fluid py-4">
        <header class="d-flex justify-content-between align-items-center mb-4">
            <h1>Dashboard Środowisk Testowych OpenShift</h1>
            <div class="d-flex align-items-center">
                <span id="lastUpdated" class="text-muted me-3">
                    Ostatnia aktualizacja: Ładowanie...
                </span>
                <span class="refresh-button" onclick="manualRefresh()" title="Odśwież dane">
                    <i class="fas fa-sync-alt"></i>
                </span>
            </div>
        </header>

        <div class="row filter-group">
            <div class="col-md-3">
                <label for="namespaceFilter" class="form-label">Namespace</label>
                <select id="namespaceFilter" class="form-select">
                    <option value="">Wszystkie</option>
                </select>
            </div>
            <div class="col-md-3">
                <label for="prefixFilter" class="form-label">Prefix</label>
                <div class="search-box">
                    <input type="text" id="prefixFilter" class="form-control" placeholder="Filtruj po prefixie...">
                    <span class="clear-search" onclick="clearPrefixFilter()"><i class="fas fa-times"></i></span>
                </div>
            </div>
            <div class="col-md-3">
                <label for="statusFilter" class="form-label">Status</label>
                <select id="statusFilter" class="form-select">
                    <option value="">Wszystkie</option>
                    <option value="Healthy">Healthy</option>
                    <option value="Degraded">Degraded</option>
                    <option value="Failed">Failed</option>
                    <option value="Starting">Starting</option>
                    <option value="Unknown">Unknown</option>
                </select>
            </div>
            <div class="col-md-3">
                <label for="viewMode" class="form-label">Widok</label>
                <select id="viewMode" class="form-select">
                    <option value="grouped">Grupowanie po namespace</option>
                    <option value="flat">Lista płaska</option>
                </select>
            </div>
        </div>

        <div id="summary-stats" class="mb-4 p-3 bg-white rounded shadow-sm">
            <div class="row">
                <div class="col-md-3">
                    <div class="card border-0">
                        <div class="card-body">
                            <h6 class="text-muted">Łączna liczba środowisk</h6>
                            <h2 id="total-envs">0</h2>
                        </div>
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="row">
                        <div class="col">
                            <div class="card border-0">
                                <div class="card-body">
                                    <h6 class="text-muted">Healthy</h6>
                                    <h4><span id="healthy-count" class="text-success">0</span></h4>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card border-0">
                                <div class="card-body">
                                    <h6 class="text-muted">Degraded</h6>
                                    <h4><span id="degraded-count" class="text-warning">0</span></h4>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card border-0">
                                <div class="card-body">
                                    <h6 class="text-muted">Failed</h6>
                                    <h4><span id="failed-count" class="text-danger">0</span></h4>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card border-0">
                                <div class="card-body">
                                    <h6 class="text-muted">Starting</h6>
                                    <h4><span id="starting-count" class="text-info">0</span></h4>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card border-0">
                                <div class="card-body">
                                    <h6 class="text-muted">Unknown</h6>
                                    <h4><span id="unknown-count" class="text-secondary">0</span></h4>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="environmentsContainer"></div>
    </div>

    <!-- Modal do szczegółów środowiska -->
    <div class="modal fade" id="environmentDetailsModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="environmentDetailsTitle">Szczegóły środowiska</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="environmentDetailsContent">
                    <!-- Wypełniane dynamicznie -->
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // Globalne zmienne
        let environments = [];
        let namespaces = [];
        let environmentDetailsModal;
        let refreshTimer;
        let isDataRefreshing = false;

        // Inicjalizacja po załadowaniu strony
        document.addEventListener('DOMContentLoaded', () => {
            // Inicjalizacja modalu
            environmentDetailsModal = new bootstrap.Modal(document.getElementById('environmentDetailsModal'));
            
            // Pobranie danych
            fetchData();
            
            // Odświeżanie co 60 sekund
            startAutoRefresh();
            
            // Obsługa filtrów
            document.getElementById('namespaceFilter').addEventListener('change', filterEnvironments);
            document.getElementById('prefixFilter').addEventListener('input', filterEnvironments);
            document.getElementById('statusFilter').addEventListener('change', filterEnvironments);
            document.getElementById('viewMode').addEventListener('change', filterEnvironments);
        });

        function startAutoRefresh() {
            clearInterval(refreshTimer);
            refreshTimer = setInterval(fetchData, 60000); // co minutę
        }

        function manualRefresh() {
            if (!isDataRefreshing) {
                toggleRefreshAnimation(true);
                fetchData();
            }
        }

        function toggleRefreshAnimation(isRefreshing) {
            const refreshButton = document.querySelector('.refresh-button');
            isDataRefreshing = isRefreshing;
            
            if (isRefreshing) {
                refreshButton.classList.add('rotating');
            } else {
                refreshButton.classList.remove('rotating');
            }
        }

        function clearPrefixFilter() {
            document.getElementById('prefixFilter').value = '';
            filterEnvironments();
        }

        // Pobieranie danych z API
        function fetchData() {
            toggleRefreshAnimation(true);
            
            fetch('/api/environments')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    environments = data;
                    updateNamespacesList();
                    updateSummaryStats();
                    filterEnvironments();
                    updateLastUpdated();
                    toggleRefreshAnimation(false);
                })
                .catch(error => {
                    console.error('Błąd pobierania danych:', error);
                    document.getElementById('environmentsContainer').innerHTML = 
                        '<div class="alert alert-danger">Nie udało się pobrać danych. Spróbuj odświeżyć stronę.</div>';
                    toggleRefreshAnimation(false);
                });
        }

        // Aktualizacja statystyk podsumowujących
        function updateSummaryStats() {
            document.getElementById('total-envs').textContent = environments.length;
            
            const statuses = {
                'Healthy': 0,
                'Degraded': 0,
                'Failed': 0,
                'Starting': 0,
                'Unknown': 0
            };
            
            environments.forEach(env => {
                if (statuses.hasOwnProperty(env.status)) {
                    statuses[env.status]++;
                } else {
                    statuses['Unknown']++;
                }
            });
            
            document.getElementById('healthy-count').textContent = statuses['Healthy'];
            document.getElementById('degraded-count').textContent = statuses['Degraded'];
            document.getElementById('failed-count').textContent = statuses['Failed'];
            document.getElementById('starting-count').textContent = statuses['Starting'];
            document.getElementById('unknown-count').textContent = statuses['Unknown'];
        }

        // Aktualizacja listy namespaces do filtrowania
        function updateNamespacesList() {
            const uniqueNamespaces = [...new Set(environments.map(env => env.namespace))].sort();
            const namespaceFilter = document.getElementById('namespaceFilter');
            
            // Zapisz aktualnie wybraną wartość
            const currentValue = namespaceFilter.value;
            
            // Wyczyść istniejące opcje, ale zachowaj pierwszą (Wszystkie)
            while (namespaceFilter.options.length > 1) {
                namespaceFilter.remove(1);
            }
            
            // Dodaj nowe opcje
            uniqueNamespaces.forEach(namespace => {
                const option = document.createElement('option');
                option.value = namespace;
                option.textContent = namespace;
                namespaceFilter.appendChild(option);
            });
            
            // Przywróć wybraną wartość, jeśli istnieje wśród nowych opcji
            if (uniqueNamespaces.includes(currentValue)) {
                namespaceFilter.value = currentValue;
            }
        }

        // Filtrowanie środowisk na podstawie wybranych opcji
        function filterEnvironments() {
            const namespaceFilter = document.getElementById('namespaceFilter').value;
            const prefixFilter = document.getElementById('prefixFilter').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const viewMode = document.getElementById('viewMode').value;
            
            const filteredEnvironments = environments.filter(env => {
                const matchNamespace = !namespaceFilter || env.namespace === namespaceFilter;
                const matchPrefix = !prefixFilter || env.prefix.toLowerCase().includes(prefixFilter);
                const matchStatus = !statusFilter || env.status === statusFilter;
                
                return matchNamespace && matchPrefix && matchStatus;
            });
            
            if (viewMode === 'grouped') {
                renderGroupedEnvironments(filteredEnvironments);
            } else {
                renderFlatEnvironments(filteredEnvironments);
            }
        }

        // Renderowanie środowisk zgrupowanych po namespace
        function renderGroupedEnvironments(envList) {
            const container = document.getElementById('environmentsContainer');
            container.innerHTML = '';
            
            // Grupowanie po namespace
            const groupedEnvironments = {};
            
            envList.forEach(env => {
                if (!groupedEnvironments[env.namespace]) {
                    groupedEnvironments[env.namespace] = [];
                }
                groupedEnvironments[env.namespace].push(env);
            });
            
            // Jeśli nie ma środowisk do wyświetlenia
            if (Object.keys(groupedEnvironments).length === 0) {
                container.innerHTML = '<div class="alert alert-info">Brak środowisk do wyświetlenia dla wybranych filtrów.</div>';
                return;
            }
            
            // Wyświetl grupy środowisk
            for (const namespace in groupedEnvironments) {
                const namespaceGroup = document.createElement('div');
                namespaceGroup.className = 'namespace-group shadow-sm';
                
                const namespaceHeader = document.createElement('div');
                namespaceHeader.className = 'namespace-header';
                
                const namespaceTitle = document.createElement('h3');
                namespaceTitle.textContent = namespace;
                
                const namespaceCounter = document.createElement('div');
                namespaceCounter.className = 'namespace-counter';
                namespaceCounter.innerHTML = `<span class="counter-badge">${groupedEnvironments[namespace].length} środowisk</span>`;
                
                namespaceHeader.appendChild(namespaceTitle);
                namespaceHeader.appendChild(namespaceCounter);
                namespaceGroup.appendChild(namespaceHeader);
                
                const cardsRow = document.createElement('div');
                cardsRow.className = 'row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4';
                
                // Sortowanie środowisk w grupie
                const sortedEnvironments = groupedEnvironments[namespace].sort((a, b) => a.prefix.localeCompare(b.prefix));
                
                sortedEnvironments.forEach(env => {
                    const envCard = createEnvironmentCard(env);
                    cardsRow.appendChild(envCard);
                });
                
                namespaceGroup.appendChild(cardsRow);
                container.appendChild(namespaceGroup);
            }
        }

        // Renderowanie środowisk jako płaska lista
        function renderFlatEnvironments(envList) {
            const container = document.getElementById('environmentsContainer');
            container.innerHTML = '';
            
            // Jeśli nie ma środowisk do wyświetlenia
            if (envList.length === 0) {
                container.innerHTML = '<div class="alert alert-info">Brak środowisk do wyświetlenia dla wybranych filtrów.</div>';
                return;
            }
            
            const cardsContainer = document.createElement('div');
            cardsContainer.className = 'namespace-group shadow-sm';
            
            const header = document.createElement('div');
            header.className = 'namespace-header';
            
            const title = document.createElement('h3');
            title.textContent = 'Wszystkie środowiska';
            
            const counter = document.createElement('div');
            counter.className = 'namespace-counter';
            counter.innerHTML = `<span class="counter-badge">${envList.length} środowisk</span>`;
            
            header.appendChild(title);
            header.appendChild(counter);
            cardsContainer.appendChild(header);
            
            const cardsRow = document.createElement('div');
            cardsRow.className = 'row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4';
            
            // Sortowanie środowisk
            const sortedEnvironments = [...envList].sort((a, b) => {
                // Najpierw po namespace
                const namespaceCompare = a.namespace.localeCompare(b.namespace);
                if (namespaceCompare !== 0) return namespaceCompare;
                
                // Potem po prefix
                return a.prefix.localeCompare(b.prefix);
            });
            
            sortedEnvironments.forEach(env => {
                const envCard = createEnvironmentCard(env);
                cardsRow.appendChild(envCard);
            });
            
            cardsContainer.appendChild(cardsRow);
            container.appendChild(cardsContainer);
        }

        // Tworzenie karty środowiska
        function createEnvironmentCard(env) {
            const colDiv = document.createElement('div');
            colDiv.className = 'col';
            
            const cardDiv = document.createElement('div');
            cardDiv.className = `card environment-card status-${env.status} shadow-sm h-100`;
            cardDiv.onclick = () => showEnvironmentDetails(env);
            
            const cardHeader = document.createElement('div');
            cardHeader.className = 'card-header d-flex justify-content-between align-items-center';
            
            const badgeClass = getStatusBadgeClass(env.status);
            cardHeader.innerHTML = `
                <strong>${env.prefix}</strong>
                <span class="badge ${badgeClass}">${env.status}</span>
            `;
            
            const cardBody = document.createElement('div');
            cardBody.className = 'card-body';
            
            // Dodanie informacji o namespace (tylko w trybie płaskim)
            if (document.getElementById('viewMode').value === 'flat') {
                const namespaceInfo = document.createElement('p');
                namespaceInfo.className = 'card-text mb-2';
                namespaceInfo.innerHTML = `<small class="text-muted">Namespace: ${env.namespace}</small>`;
                cardBody.appendChild(namespaceInfo);
            }
            
            // Container na liczniki zasobów
            const resourcesDiv = document.createElement('div');
            resourcesDiv.className = 'd-flex gap-2 mb-3';
            
            // Pody
            const podsCount = document.createElement('span');
            podsCount.className = 'resource-badge bg-light';
            podsCount.innerHTML = `<i class="fas fa-cubes me-1"></i>${env.pods.length}`;
            resourcesDiv.appendChild(podsCount);
            
            // Serwisy
            const servicesCount = document.createElement('span');
            servicesCount.className = 'resource-badge bg-light';
            servicesCount.innerHTML = `<i class="fas fa-network-wired me-1"></i>${env.services.length}`;
            resourcesDiv.appendChild(servicesCount);
            
            // Route
            const routesCount = document.createElement('span');
            routesCount.className = 'resource-badge bg-light';
            routesCount.innerHTML = `<i class="fas fa-route me-1"></i>${env.routes.length}`;
            resourcesDiv.appendChild(routesCount);
            
            cardBody.appendChild(resourcesDiv);
            
            // Dodanie wizualnej reprezentacji podów
            const podsStatus = document.createElement('div');
            podsStatus.className = 'mt-2';
            
            if (env.pods.length > 0) {
                env.pods.forEach(pod => {
                    const podIndicator = document.createElement('span');
                    podIndicator.className = `pod-status pod-status-${pod.status}`;
                    podIndicator.title = `${pod.name}: ${pod.status}`;
                    podsStatus.appendChild(podIndicator);
                });
            } else {
                podsStatus.innerHTML = '<small class="text-muted">Brak podów</small>';
            }
            
            cardBody.appendChild(podsStatus);
            
            cardDiv.appendChild(cardHeader);
            cardDiv.appendChild(cardBody);
            colDiv.appendChild(cardDiv);
            
            return colDiv;
        }

        // Wyświetlenie szczegółów środowiska w modalu
        function showEnvironmentDetails(env) {
            const modalTitle = document.getElementById('environmentDetailsTitle');
            modalTitle.innerHTML = `${env.prefix} <span class="badge ${getStatusBadgeClass(env.status)}">${env.status}</span>`;
            
            const content = document.getElementById('environmentDetailsContent');
            content.innerHTML = '';
            
            // Informacje o namespace
            const infoDiv = document.createElement('div');
            infoDiv.className = 'mb-4';
            infoDiv.innerHTML = `
                <p><strong>Namespace:</strong> ${env.namespace}</p>
                <p><strong>Prefix:</strong> ${env.prefix}</p>
            `;
            
            if (env.creationTimestamp) {
                infoDiv.innerHTML += `<p><strong>Data utworzenia:</strong> ${formatDate(env.creationTimestamp)}</p>`;
            }
            
            content.appendChild(infoDiv);
            
            // Zakładki do wyświetlania różnych elementów
            const tabsDiv = document.createElement('div');
            tabsDiv.innerHTML = `
                <ul class="nav nav-tabs" id="envDetailsTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="pods-tab" data-bs-toggle="tab" data-bs-target="#pods" type="button" role="tab" aria-controls="pods" aria-selected="true">
                            Pody <span class="badge bg-secondary">${env.pods.length}</span>
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="services-tab" data-bs-toggle="tab" data-bs-target="#services" type="button" role="tab" aria-controls="services" aria-selected="false">
                            Serwisy <span class="badge bg-secondary">${env.services.length}</span>
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="routes-tab" data-bs-toggle="tab" data-bs-target="#routes" type="button" role="tab" aria-controls="routes" aria-selected="false">
                            Route <span class="badge bg-secondary">${env.routes.length}</span>
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="labels-tab" data-bs-toggle="tab" data-bs-target="#labels" type="button" role="tab" aria-controls="labels" aria-selected="false">
                            Etykiety
                        </button>
                    </li>
                </ul>
                <div class="tab-content pt-3" id="envDetailsTabsContent">
                    <div class="tab-pane fade show active" id="pods" role="tabpanel" aria-labelledby="pods-tab">
                        ${createPodsTable(env.pods)}
                    </div>
                    <div class="tab-pane fade" id="services" role="tabpanel" aria-labelledby="services-tab">
                        ${createServicesTable(env.services)}
                    </div>
                    <div class="tab-pane fade" id="routes" role="tabpanel" aria-labelledby="routes-tab">
                        ${createRoutesTable(env.routes)}
                    </div>
                    <div class="tab-pane fade" id="labels" role="tabpanel" aria-labelledby="labels-tab">
                        ${createLabelsTable(env.labels)}
                    </div>
                </div>
            `;
            
            content.appendChild(tabsDiv);
            environmentDetailsModal.show();
        }

        // Tworzenie tabeli podów
        function createPodsTable(pods) {
            if (!pods || pods.length === 0) {
                return '<div class="alert alert-info">Brak podów dla tego środowiska.</div>';
            }
            
            let tableHtml = `
                <div class="table-container">
                    <table class="table table-sm table-hover">
                        <thead>
                            <tr>
                                <th>Nazwa</th>
                                <th>Status</th>
                                <th>Ready</th>
                                <th>Restarty</th>
                                <th>IP</th>
                                <th>Wiek</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            pods.forEach(pod => {
                const statusClass = getStatusColorClass(pod.status);
                tableHtml += `
                    <tr>
                        <td>${pod.name}</td>
                        <td><span class="badge ${statusClass}">${pod.status}</span></td>
                        <td>${pod.readyStatus}</td>
                        <td>${pod.restarts || '0'}</td>
                        <td>${pod.ip || '-'}</td>
                        <td>${pod.age || '-'}</td>
                    </tr>
                `;
            });
            
            tableHtml += `
                        </tbody>
                    </table>
                </div>
            `;
            
            return tableHtml;
        }

        // Tworzenie tabeli serwisów
        function createServicesTable(services) {
            if (!services || services.length === 0) {
                return '<div class="alert alert-info">Brak serwisów dla tego środowiska.</div>';
            }
            
            let tableHtml = `
                <div class="table-container">
                    <table class="table table-sm table-hover">
                        <thead>
                            <tr>
                                <th>Nazwa</th>
                                <th>Typ</th>
                                <th>Cluster IP</th>
                                <th>Porty</th>
                                <th>Wiek</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            services.forEach(service => {
                tableHtml += `
                    <tr>
                        <td>${service.name}</td>
                        <td>${service.type || 'ClusterIP'}</td>
                        <td>${service.clusterIP || '-'}</td>
                        <td>${service.ports || '-'}</td>
                        <td>${service.age || '-'}</td>
                    </tr>
                `;
            });
            
            tableHtml += `
                        </tbody>
                    </table>
                </div>
            `;
            
            return tableHtml;
        }

        // Tworzenie tabeli Route
        function createRoutesTable(routes) {
            if (!routes || routes.length === 0) {
                return '<div class="alert alert-info">Brak route dla tego środowiska.</div>';
            }
            
            let tableHtml = `
                <div class="table-container">
                    <table class="table table-sm table-hover">
                        <thead>
                            <tr>
                                <th>Nazwa</th>
                                <th>Host</th>
                                <th>Path</th>
                                <th>Serwis</th>
                                <th>Port</th>
                                <th>Wiek</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            routes.forEach(route => {
                tableHtml += `
                    <tr>
                        <td>${route.name}</td>
                        <td>${route.host || '-'}</td>
                        <td>${route.path || '/'}</td>
                        <td>${route.service || '-'}</td>
                        <td>${route.port || '-'}</td>
                        <td>${route.age || '-'}</td>
                    </tr>
                `;
            });
            
            tableHtml += `
                        </tbody>
                    </table>
                </div>
            `;
            
            return tableHtml;
        }

       </script>
</body>
